###############################################
# NETLIFY CONFIG FOR SPI WEATHER + WAVE UPDATER
###############################################

[build]
  functions = "functions"
  publish = "public"

[build.environment]
  GITHUB_TOKEN = ""
  GITHUB_REPO = ""
  GITHUB_BRANCH = ""
  STORMGLASS_KEY = ""

###############################################
# REDIRECTS
###############################################

[[redirects]]
  from = "/weather"
  to = "/.netlify/functions/weather"
  status = 200
  force = true

[[redirects]]
  from = "/waveUpdater"
  to = "/.netlify/functions/waveUpdater"
  status = 200
  force = true

###############################################
# FUNCTIONS ROOT CONFIG
###############################################

[functions]
  node_bundler = "esbuild"
  external_node_modules = ["node-fetch", "@octokit/rest"]

###############################################
# INDIVIDUAL FUNCTION SETTINGS
###############################################

[functions.weather]
  timeout = 10

[functions.waveUpdater]
  timeout = 20

###############################################
# PLUGINS
###############################################

[[plugins]]
  package = "@netlify/plugin-functions-install-core"
